<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>KATLA Indonesia</title>
<style>
  body{
    font-family: Arial, sans-serif;
    background:#121213;
    color:#fff;
    text-align:center;
  }
  h1{margin:10px 0}
  #board{
    display:grid;
    grid-template-rows:repeat(6,1fr);
    gap:8px;
    width:260px;
    margin:20px auto;
  }
  .row{
    display:grid;
    grid-template-columns:repeat(5,1fr);
    gap:8px;
  }
  .cell{
    border:2px solid #3a3a3c;
    height:45px;
    font-size:22px;
    font-weight:bold;
    display:flex;
    align-items:center;
    justify-content:center;
    text-transform:uppercase;
  }
  .correct{background:#538d4e;border-color:#538d4e;}
  .present{background:#b59f3b;border-color:#b59f3b;}
  .absent{background:#3a3a3c;border-color:#3a3a3c;}

  #keyboard{
    max-width:500px;
    margin:20px auto;
  }
  .keyrow{display:flex;justify-content:center;margin-bottom:6px;}
  button{
    margin:2px;
    height:45px;
    min-width:32px;
    background:#818384;
    color:#fff;
    border:none;
    border-radius:4px;
    font-weight:bold;
    cursor:pointer;
  }
  button.correct{background:#538d4e;}
  button.present{background:#b59f3b;}
  button.absent{background:#3a3a3c;}
</style>
</head>
<body>

<h1>KATLA ðŸ‡®ðŸ‡©</h1>

<div id="board"></div>

<div id="keyboard">
  <div class="keyrow">Q W E R T Y U I O P</div>
  <div class="keyrow">A S D F G H J K L</div>
  <div class="keyrow">
    <button id="enter">ENTER</button>
    Z X C V B N M
    <button id="back">âŒ«</button>
  </div>
</div>

<script>
const WORDS = [
  "LUAR","BATU","APIK","EMAS","KOTA",
  "LAUT","HIJA","MERAH","HITAM","PUTIH",
  "PANAS","DINGI","ANGIN","AWAN","HUJAN",
  "PAGI","SIANG","MALAM","SUNGA","BUKIT",
  "HUTAN","TANAH","AIRKU","BAHAG","SENYU"
];

const ANSWER = WORDS[Math.floor(Math.random()*WORDS.length)];
let row = 0;
let col = 0;
let current = "";
let finished = false;

const board = document.getElementById("board");

// build board
for(let i=0;i<6;i++){
  const r=document.createElement("div");
  r.className="row";
  for(let j=0;j<5;j++){
    const c=document.createElement("div");
    c.className="cell";
    r.appendChild(c);
  }
  board.appendChild(r);
}

function addLetter(l){
  if(col<5 && !finished){
    current+=l;
    board.children[row].children[col].textContent=l;
    col++;
  }
}

function backspace(){
  if(col>0 && !finished){
    col--;
    current=current.slice(0,-1);
    board.children[row].children[col].textContent="";
  }
}

function evaluate(){
  if(current.length!==5) return;

  const answerArr = ANSWER.split("");
  const guessArr = current.split("");
  const status = Array(5).fill("absent");

  // hijau dulu
  for(let i=0;i<5;i++){
    if(guessArr[i]===answerArr[i]){
      status[i]="correct";
      answerArr[i]=null;
    }
  }

  // orange
  for(let i=0;i<5;i++){
    if(status[i]==="correct") continue;
    const idx = answerArr.indexOf(guessArr[i]);
    if(idx>-1){
      status[i]="present";
      answerArr[idx]=null;
    }
  }

  // apply warna
  for(let i=0;i<5;i++){
    const cell = board.children[row].children[i];
    cell.classList.add(status[i]);
    colorKey(guessArr[i], status[i]);
  }

  if(current===ANSWER){
    finished=true;
    setTimeout(()=>alert("ðŸŽ‰ Benar!"),100);
    return;
  }

  row++;
  col=0;
  current="";

  if(row===6){
    finished=true;
    setTimeout(()=>alert("âŒ Jawaban: "+ANSWER),100);
  }
}

function colorKey(letter, state){
  document.querySelectorAll("button").forEach(b=>{
    if(b.textContent===letter){
      if(b.classList.contains("correct")) return;
      if(b.classList.contains("present") && state==="absent") return;
      b.classList.remove("absent","present","correct");
      b.classList.add(state);
    }
  });
}

// keyboard click
document.querySelectorAll(".keyrow").forEach(r=>{
  r.innerHTML=r.textContent.split(" ").map(k=>{
    if(k.length===1) return `<button>${k}</button>`;
    return k;
  }).join("");
});

document.addEventListener("click",e=>{
  if(!e.target.matches("button")) return;
  const t=e.target.textContent;
  if(t==="ENTER") evaluate();
  else if(t==="âŒ«") backspace();
  else addLetter(t);
});

// physical keyboard
document.addEventListener("keydown",e=>{
  if(finished) return;
  if(e.key==="Enter") evaluate();
  else if(e.key==="Backspace") backspace();
  else if(/^[a-zA-Z]$/.test(e.key)) addLetter(e.key.toUpperCase());
});
</script>

</body>
</html>
